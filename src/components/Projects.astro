---
import Button from '~/components/Button.astro';

const projects = await Astro.glob('~/content/what-we-do/*.md');
---

<div class="flex flex-col gap-y-8">
	<div class="grid grid-cols lg:grid-cols-2 gap-6 px-8">
		{
			projects.map((p) => {
				const { logo, name, link, download } = p.frontmatter;
				return (
					<div class="bg-white rounded-xl p-8 shadow bg-opacity-50">
						<div class="grid grid-cols-4">
							<div
								class="hidden md:block bg-origin-content bg-contain bg-center bg-no-repeat w-32 h-32 lg:w-20 lg:h-20 rounded-full ring-2 ring-saccent"
								style={`background-image: url(${logo})`}
							/>
							<div class="col-span-4 md:col-span-3">
								<div class="flex flex-row items-center gap-4">
									<h1 class="text-4xl text-black font-sans">{name}</h1>
									<div
										class="block md:hidden bg-origin-content bg-contain bg-center bg-no-repeat w-12 h-12 rounded-full ring-2 ring-saccent"
										style={`background-image: url(${logo})`}
									/>
								</div>
								<div set:html={p.compiledContent()} class="text-black py-5" />
								<div class="flex flex-row flex-wrap gap-1">
									<Button href={download} text="Download" cls="text-sm mr-4" />
									<Button href={link} text="Learn more..." inverted={true} cls="text-sm" />
								</div>
							</div>
						</div>
					</div>
				);
			})
		}
	</div>
	<div class="text-center">
		<Button href="/software" text="Load more..." />
	</div>
</div>
